<html>
<head>
 <style type="text/css">
/* <![CDATA[ */ 
@import "http://www.tigris.org/branding/css/tigris.css"; 
@import "http://www.tigris.org/branding/css/inst.css"; 
/*  ]]> */
 </style>
  <link rel="stylesheet" type="text/css" href="http://www.tigris.org/branding/css/print.css" media="print" />
<script src="http://www.tigris.org/branding/scripts/tigris.js" type="text/javascript">
</script>
 <title>Project Overview</title>
</head>
<body>


<h3>OVERVIEW</h3>

<p>Juxy is a simple unit testing library for XSLT written in Java.
Juxy allows to call or apply individual XSLT templates from Java and does not use any specific features of XSLT processor for that purposes.
It relies entirely on TRaX API and should work with any TRaX compliant XSLT processor.
</p>

<h3>AN EXAMPLE</h3>

<p>Suppose you have an XSLT stylesheet taking the following address and transforming it to some string:
<pre>
&lt;address>
    &lt;city>Saint-Petersburg&lt;/city>
    &lt;street>Nevsky pr.&lt;/street>
    &lt;house>24&lt;/house>
    &lt;zip>196254&lt;/zip>
&lt;/address>
</pre>

<p>The result should be: <code>196254, Saint-Petersburg, Nevsky pr., 24</code>

<p>It's time now to write test which will assert that we've got the expected result. It could be as simple as this:
<pre>
(1) public class AddressTestCase extends JuxyTestCase {

    public void testAddressToString() throws Exception {
(2)        RunnerContext ctx = newContext("address.xsl");
(3)        ctx.setDocument("&lt;address>" +
            "&lt;city>Saint-Petersburg&lt;/city>" +
            "&lt;street>Nevsky pr.&lt;/street>" +
            "&lt;house>24&lt;/house>" +
            "&lt;zip>196254&lt;/zip>" +
            "&lt;/address>");
(4)        Node result = applyTemplates(xpath("address"));
(5)        assertEquals("196254, Saint-Petersburg, Nevsky pr., 24",
(6)                normalizeAll(xpath("text()").toString(result)));
    }

}
</pre>

<p>(1):
It is possible to use Juxy without JUnit, however if all that you need is to write JUnit tests it is worth to extend from JuxyTestCase.
This class will save you some time.

<p>(2):
First of all we need to create new <code>RunnerContext</code> object. This object  will hold the context of the transformation:
you can setup there current node, variables, template and stylesheet parameters and so on.
Method <code>newContext</code> not only creates new instance of <code>RunnerContext</code>, but it also sets it as a current context in the test case,
so you will not need to pass it to the <code>applyTemplates</code> method.

<p>(3):
We are setting input document into the context. This document will be passed to the input of the transformation. It
can be any well-formed XML document.

<p>(4):Then we started applying templates by invoking method <code>applyTemplates</code>. We passed this method one argument: an XPath expression.
This expression will act in the same way as the select attribute of the <code>&lt;xsl:apply-templates/></code> instruction.

<p>(5):
We've got the result of the transformation as a DOM Node object. In fact it is a DocumentFragment node, because there are
cases when transformation could return several nodes and they are not necessary will present a well formed document.
For example, in our case we expect to receive only one TextNode. Then we can assert that result contains expected text.

<p>(6):
We are evaluating XPath expression <code>text()</code> to receive text content of the node. Note that we also called <code>normalizeAll</code> method.
This method will convert all new line characters into the space char and then collapses sequences of space characters into the one
space and finally trims string. By doing this we will remove all meaningless spaces from the resulting string.

<h3>HOW DOES IT WORK</h3>

<p>Juxy works by dynamically creating XSLT stylesheet. From that stylesheet the tested stylesheet is imported via <code>&lt;xsl:import/></code> instruction,
thus all its templates and variables automatically got lower priority, so we can easily redefine them.

<p>Any variables and parameters specified in the transformation context will be placed in the generated stylesheet. If current node
was specified, then corresponding <code>&lt;xsl:for-each/></code> is added to that stylesheet.

<p>Thus when call or apply templates method invoked, Juxy generates new XSLT stylesheet (it will be generated as DOM Document),
places there specified variables and parameters, and inserts template matching root node (<code>"/"</code>).
In this template the required <code>&lt;xsl:call-template/></code> or <code>&lt;xsl:apply-templates/></code> instructions are placed.
If current node was specified then <code>&lt;xsl:for-each/></code> instruction will be added as their parent.

<p>Because Juxy does not use any XSLT processor specific features it should work with any XSLT processor supporting TRaX API.
For now it is known to work with <a href="http://xml.apache.org/xalan-j/">Apache Xalan</a> and
<a href="http://saxon.sourceforge.net/">Saxon</a> (both Saxon 6.5.X and Saxon 8.X are supported).
XSLT 2.0 templates are known to work with Saxon 8.X, although they are not thoroughly tested.

<h3>DOWNLOAD</h3>

<p><b>DOWNLOAD PACKAGE</b>

<p>Juxy is available for download from <a href="http://juxy.tigris.org/servlets/ProjectDocumentList?folderID=5095&expandFolder=5095&folderID=0">releases folder</a>.
Current version is 0.5, released on July 30, 2005.

<p>For now only binary package of Juxy is available. If you need to get sources, then
you should checkout them from CVS, see how to do this <a href="http://juxy.tigris.org/servlets/ProjectSource">here</a>.

<p><b>SOFTWARE REQUIREMENTS</b>

<p>Juxy requires Java 1.4, JAXP compliant XML parser with DOM TreeWalker support (<a href="http://xml.apache.org/xerces2-j">Xerces</a>),
TRaX compliant XSLT transformer (<a href="http://xml.apache.org/xalan-j/">Apache Xalan</a> or
<a href="http://saxon.sourceforge.net/">Saxon (both 6.5.X and 8.X should work)</a>)
and <a href="http://jaxen.org/">Jaxen</a> for XPath expressions evaluation.


<!--
<p>Until your project is approved, only you can view it and work on
it.
</p>

<ul>
<li>This index.html will be used if and only if you have the "Use
Project Home Page" option checked on the "Administer Project" page
(click the "Admin" tab).</li>

<li>To edit this file, check out your project via CVS and edit www/index.html.

<li>You can 'cvs add' and commit other files under the project's "www"
directory and they will published to your project web site.</li>

<li>Also, consider starting a thread in the "dev" mailing list to get
these discussion started.  A good one is an "introduction" thread where
people post messages about themselves and their interest in the
project.</li>

<li>You can add a "Highlights:" line to the top of all web pages by adding a file www/project_highlights.html </li>
</ul>

<h3>Mission</h3>

<p>What is the goal of this project?
</p>

<p>What is the scope of this project?
</p>

<p>For example:</p>

<ul>
<li>Develop just enough functionality to scratch a particular itch</li>
<li>Build a tool just like XYZ, but less broken</li>
<li>Build the best XYZ-tool ever!</li>
</ul>


<p>What are high-level features you are sure to build?
</p>
<ul>

<li>What would you write on a billboard about your project? Users
might only look for a few seconds.</li>

<li>Use the issue tracker to track features and enhancement
requests. It is not just for bugs, pre-populate it with feature
descriptions so that potential contributors know what you would like them
to work on.</li>
</ul>

<p>What are the high-level assumptions or ground rules for the project?
</p>

<p>For example:
</p>

<ul>
<li> we will use programming language X on operating system Y for now.

<li>We will, or will not, consider certain functional areas like
internationalization, high security, concurrency, etc.  The list of
functional areas will depend on what you are trying to do.

<li>Try to keep this part short.
</ul>

-->

<h3>RELATED RESOURCES</h3>

<ul>
    <li><a href="http://xmlunit.sourceforge.net/">XMLUnit</a> - JUnit and NUnit testing for XML</li>
    <li><a href="http://xsltunit.org/">XSLTunit</a></li>
</ul>

</body>
</html>
